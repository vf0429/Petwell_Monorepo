ğŸ¾ Petwell Monorepo å¼€å‘æŒ‡å— (Antigravityç‰ˆ)
ğŸ“¡ æ¶æ„ä¸ç«¯å£å®šä¹‰ (Architecture & Ports)
æœ¬é¡¹ç›®åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒæœåŠ¡ï¼Œå„æœåŠ¡ç«¯å£å®šä¹‰ä¸¥æ ¼å¦‚ä¸‹ï¼Œè¯·å‹¿éšæ„æ›´æ”¹ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¿æ¥å¤±è´¥ã€‚

âš™ï¸ å…³é”®é…ç½® (Environment Variables)
ä¸ºäº†è®©æœåŠ¡è·‘é€šï¼Œè¯·ç¡®ä¿ä½ çš„æœ¬åœ°é…ç½®æ–‡ä»¶ (.env) å†…å®¹å¦‚ä¸‹ï¼š

1. Frontend (Antigravity/Sweetpad)
åœ¨å‰ç«¯é¡¹ç›®çš„ç¯å¢ƒå˜é‡è®¾ç½®ä¸­ï¼ˆæˆ– .env.localï¼‰ï¼š

2. Backend (Go) - backend/.env
åç«¯æœåŠ¡ç›‘å¬ 8000ï¼Œå¹¶éœ€è¦çŸ¥é“ RAG åœ¨ 8001ã€‚

3. RAG Service (Python) - rag/.env
AI æœåŠ¡å¿…é¡»ç›‘å¬ 8001ã€‚

ğŸš€ å¯åŠ¨æµç¨‹ (Startup Workflow)
ç”±äºå‰ç«¯ç”± Sweetpad ç®¡ç†ï¼Œæ¨èçš„å¼€å‘å¯åŠ¨æ–¹å¼å¦‚ä¸‹ï¼š

æ–¹å¼ A: æ··åˆå¼€å‘ (æ¨è)
å‰ç«¯ç”¨å·¥å…·è·‘ï¼Œåç«¯å’Œ AI ç”¨ Docker è·‘ã€‚

å¯åŠ¨åç«¯å’Œ AI: åœ¨ Monorepo æ ¹ç›®å½•è¿è¡Œï¼š

å¯åŠ¨å‰ç«¯: åœ¨ Sweetpad ä¸­ç‚¹å‡» "Run" (Antigravity Frontend)ã€‚

æ–¹å¼ B: çº¯æœ¬åœ°å¼€å‘ (å…¨æ‰‹åŠ¨)
å¦‚æœä½ ä¸ä½¿ç”¨ Dockerï¼Œæ‰‹åŠ¨å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š

Terminal 1 (RAG):

Terminal 2 (Backend):

Terminal 3 / Sweetpad (Frontend): å¯åŠ¨ä½ çš„å‰ç«¯ç¯å¢ƒã€‚

ğŸ³ Docker Compose é…ç½®æ›´æ–°
(è¯·ç¡®ä¿æ ¹ç›®å½•çš„ docker-compose.yml å·²åŒæ­¥æ›´æ–°ç«¯å£)

ğŸš¨ å¸¸è§æ’é”™ (Troubleshooting)
Q: å‰ç«¯è¯·æ±‚æŠ¥é”™ 404 æˆ– Connection Refused?

æ£€æŸ¥: ä½ çš„æµè§ˆå™¨ Network é¢æ¿ï¼Œè¯·æ±‚çš„åœ°å€æ˜¯ä¸æ˜¯ http://localhost:8000/api/chatï¼Ÿ

é”™è¯¯åŸå› : ä»¥å‰æ˜¯ 8080ï¼Œå¯èƒ½ä½ çš„ .env.local æ²¡æ›´æ–°ï¼Œæˆ–è€…æµè§ˆå™¨ç¼“å­˜äº†æ—§åœ°å€ã€‚

Q: åç«¯æŠ¥é”™ "RAG connection failed"?

æ£€æŸ¥: åç«¯æ—¥å¿—æ˜¾ç¤ºå®ƒåœ¨è¿å“ªé‡Œï¼Ÿ

ä¿®æ­£: ç¡®ä¿åç«¯è¿çš„æ˜¯ 8001ã€‚å¦‚æœä»¥å‰æ˜¯ 8000ï¼Œç°åœ¨åç«¯è‡ªå·±å ç”¨äº† 8000ï¼Œç»å¯¹ä¸èƒ½è®©åç«¯è¿è‡ªå·±ï¼ˆä¼šæ­»å¾ªç¯æˆ–æŠ¥é”™ï¼‰ã€‚

Q: ç«¯å£å†²çª (Port already in use)?

æ£€æŸ¥: 8000 ç«¯å£éå¸¸çƒ­é—¨ã€‚å¦‚æœä½ ç”µè„‘ä¸Šè·‘äº†å…¶ä»– Python æœåŠ¡æˆ– Djangoï¼Œå¯èƒ½ä¼šå ç”¨ 8000ã€‚

è§£å†³: lsof -i :8000 æŸ¥ä¸€ä¸‹è°åœ¨ç”¨ã€‚

---

## ğŸ¤ æäº¤è§„èŒƒ (Git Flow)

ç”±äºæ˜¯ Monorepoï¼Œæäº¤ä»£ç æ—¶è¯·éµå¾ª **åŸå­æäº¤ (Atomic Commits)** åŸåˆ™ã€‚

* **âŒ é”™è¯¯åšæ³•**: ä¿®æ”¹äº†å‰ç«¯å’Œåç«¯ï¼Œç”¨ä¸€ä¸ª commit `update code` æäº¤ã€‚
* **âœ… æ­£ç¡®åšæ³•**:
1. `git add backend/` -> `git commit -m "feat(backend): add user validation logic"`
2. `git add frontend/` -> `git commit -m "style(frontend): update chat bubble color"`



**Commit Message å‰ç¼€å»ºè®®**:

* `feat(scope)`: æ–°åŠŸèƒ½ (scope å¯ä»¥æ˜¯ frontend, backend, rag)
* `fix(scope)`: ä¿® Bug
* `docs`: ä»…æ–‡æ¡£ä¿®æ”¹
* `chore`: é…ç½®å˜åŠ¨ (å¦‚ docker-compose, .gitignore)

---

## ğŸ†˜ å¸¸è§é—®é¢˜ (Troubleshooting)

1. **Q: å‰ç«¯æŠ¥é”™ Connection Refused?**
* æ£€æŸ¥ Go åç«¯æ˜¯å¦å¯åŠ¨åœ¨ 8080ã€‚
* æ£€æŸ¥ `.env.local` é‡Œçš„åœ°å€æ˜¯å¦æ­£ç¡®ã€‚


2. **Q: åç«¯æŠ¥é”™ RAG Service Unavailable?**
* æ£€æŸ¥ Python æœåŠ¡æ˜¯å¦å¯åŠ¨åœ¨ 8000ã€‚
* å¦‚æœåœ¨ Docker å†…è¿è¡Œï¼Œç¡®ä¿ URL æ˜¯ `http://rag:8000` è€Œä¸æ˜¯ localhostã€‚


3. **Q: ä¿®æ”¹äº† Go ä»£ç ä¸ç”Ÿæ•ˆï¼Ÿ**
* å¦‚æœä½ æ˜¯ç”¨ `docker-compose up` å¯åŠ¨çš„ï¼Œéœ€è¦æ‰‹åŠ¨é‡å¯å®¹å™¨æˆ–ä½¿ç”¨ `air` è¿›è¡Œçƒ­é‡è½½ã€‚å»ºè®®å¼€å‘æ—¶æœ¬åœ° `go run`ã€‚
